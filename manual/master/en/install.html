<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic usage &mdash; PHYSBO 1.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="notebook/index.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> PHYSBO
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install">Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#required-packages">Required Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-and-install">Download and Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uninstall">Uninstall</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-structures">Basic structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculation-flow">Calculation flow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="notebook/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithm.html">Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/physbo.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgement.html">Acknowledgement</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PHYSBO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Basic usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/install.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="basic-usage">
<h1>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this heading"></a></h1>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this heading"></a></h2>
<section id="required-packages">
<h3>Required Packages<a class="headerlink" href="#required-packages" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Python &gt;= 3.6</p></li>
<li><p>numpy</p></li>
<li><p>scipy</p></li>
</ul>
</section>
<section id="download-and-install">
<h3>Download and Install<a class="headerlink" href="#download-and-install" title="Permalink to this heading"></a></h3>
<ul>
<li><p>From <code class="docutils literal notranslate"><span class="pre">PyPI</span></code> (recommended)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip3 install physbo
</pre></div>
</div>
<ul>
<li><p>Required packages such as NumPy will also be installed at the same time.</p></li>
<li><p>If you add the <code class="docutils literal notranslate"><span class="pre">--user</span></code> option, it will be installed under the user’s home directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip3 install --user physbo
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>From source (for developers)</p>
<ol class="arabic">
<li><p>Download or clone the github repository</p>
<blockquote>
<div><p>$ git clone <a class="reference external" href="https://github.com/issp-center-dev/PHYSBO">https://github.com/issp-center-dev/PHYSBO</a></p>
</div></blockquote>
</li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">pip</span></code> to 19.0 or higher</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip3 install -U pip

- If you don&#39;t have ``pip3``, you can install it with ``python3 -m ensurepip``.
</pre></div>
</div>
</li>
<li><p>Install</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd PHYSBO
$ pip3 install --user ./
</pre></div>
</div>
</li>
</ol>
</li>
</ul>
</section>
<section id="uninstall">
<h3>Uninstall<a class="headerlink" href="#uninstall" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Execute the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip uninstall physbo
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="basic-structures">
<h2>Basic structures<a class="headerlink" href="#basic-structures" title="Permalink to this heading"></a></h2>
<p>PHYSBO has the following structure (shown up to the second level).</p>
<p>Each module is created with the following structure.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">blm</span></code> :Module for Baysean linear model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gp</span></code> :Module for Gaussian Process</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">opt</span></code> :Module for optimazation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search</span></code> :Module for searching for optimal solutions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">predictor.py</span></code> :Abstract class for predictors</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">variable.py</span></code> :Class defined for variable associations used in physbo</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">misc</span></code> : Others (e.g., modules for normalizing the search space)</p></li>
</ul>
<p>For more information about each module, please refer to the API reference.</p>
</section>
<section id="calculation-flow">
<h2>Calculation flow<a class="headerlink" href="#calculation-flow" title="Permalink to this heading"></a></h2>
<p>Bayesian optimization is well suited for optimization problems such as complex simulations or real-world experimental tasks where the objective function is very costly to evaluate.
In PHYSBO, the following steps are used to perform the optimization (please refer to the tutorial and API reference for details on each).</p>
<ol class="arabic simple">
<li><p>Defining the search space</p></li>
</ol>
<blockquote>
<div><p>Define each parameter set (d-dimensional vector) as a search candidate, where N: the number of search candidates , d: the number of input parameter dimensions. The parameter set should list all the candidates.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Defining the simulator</p></li>
</ol>
<blockquote>
<div><p>For searching candidates defined above, define a simulator that gives the objective function values (values to be optimized, such as material property values) for each search candidate. In PHYSBO, the direction of optimization is to maximize the objective function, so if you want to minimize the objective function, you can do so by applying a negative value to the value returned by the simulator.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Performing optimization</p></li>
</ol>
<blockquote>
<div><p>First, set the optimization policy (the search space is passed to policy as an argument at this stage). You can choose between the following two optimization methods.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random_search</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bayes_search</span></code></p></li>
</ul>
<p>In <code class="docutils literal notranslate"><span class="pre">random_search</span></code>, we randomly select parameters from the search space and search for the largest objective function among them. It is used to prepare an initial set of parameters as a preprocessing step for Bayesian optimization. <code class="docutils literal notranslate"><span class="pre">bayes_search</span></code> performs Bayesian optimization. The type of score (acquisition function) in Bayesian optimization can be one of the following.</p>
<ul class="simple">
<li><p>TS (Thompson Sampling): Sample one regression function from the posterior probability distribution of the learned Gaussian process, and select the point where the predicetd value becomes maximum as a next candidate.</p></li>
<li><p>EI (Expected Improvement): Select the point where the expected value of the difference between the predicted value by the Gaussian process and the maximum value in the current situation becomes the maximum as a next candidate.</p></li>
<li><p>PI (Probability of Improvement): Select the point with the highest probability of exceeding the current maximum of the current acquisition function as a next candidate.</p></li>
</ul>
<p>Details of  Gaussian processes are described in <a class="reference internal" href="algorithm.html#chap-algorithm"><span class="std std-ref">Algorithm</span></a> . For other details of each method, please see  <a class="reference external" href="https://github.com/tsudalab/combo/blob/master/docs/combo_document.pdf">this reference</a> .
If you specify the simulator and the number of search steps in these methods, the following loop will rotate by the number of search steps.</p>
<blockquote>
<div><p>i). Select the next parameter to be executed from the list of candidate parameters.</p>
<p>ii). Run the simulator with the selected parameters.</p>
</div></blockquote>
<p>The number of parameter returned in i) is one by default, but it is possible to return multiple parameters in one step. For more details, please refer to the “Exploring multiple candidates at once” section of the tutorial. Also, instead of running the above loop inside PHYSBO, it is possible to control i) and ii) separately from the outside. In other words, it is possible to propose the next parameter to be executed from PHYSBO, evaluate its objective function value in some way outside PHYSBO (e.g., by experiment rather than numerical calculation), and register the evaluated value in PHYSBO. For more details, please refer to the “Running Interactively” section of the tutorial.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Check numerical results</p></li>
</ol>
<blockquote>
<div><p>The search result <code class="docutils literal notranslate"><span class="pre">res</span></code> is returned as an object of the <code class="docutils literal notranslate"><span class="pre">history</span></code> class ( <code class="docutils literal notranslate"><span class="pre">physbo.search.discrete.results.history</span></code> ). The following is a reference to the search results.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">res.fx</span></code>: The logs of evaluation values for simulator (objective function) simulator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">res.chosen_actions</span></code>: The logs of the action ID (parameter) when the simulator has executed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fbest,</span> <span class="pre">best_action=</span> <span class="pre">res.export_all_sequence_best_fx()</span></code>: The logs of the best values and their action IDs (parameters) at each step where the simulator has executed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">res.total_num_search</span></code>: Total number steps where the simulator has executed.</p></li>
</ul>
<p>The search results can be saved to an external file using the <code class="docutils literal notranslate"><span class="pre">save</span></code> method, and the output results can be loaded using the <code class="docutils literal notranslate"><span class="pre">load</span></code> method. See the tutorial for details on how to use it.</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="notebook/index.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-, PHYSBO developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  




<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Read the Docs</span>
    v: master
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Languages</dt>
      
        
        <dd>
        <strong>
          <a href="../../master/en/install.html">en</a>
        </strong>
        </dd>
      
        
        <dd>
        
          <a href="../../master/ja/install.html">ja</a>
        
        </dd>
      

      <dt>Branches</dt>
      
        
        <dd>
        
          <a href="../../develop/en/install.html">develop</a>
        
        </dd>
      
        
        <dd>
        <strong>
          <a href="../../master/en/install.html">master</a>
        </strong>
        </dd>
      

      <dt>Tags</dt>
      

    </dl>
  </div>
</div>
 <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>